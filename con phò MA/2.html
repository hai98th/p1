<html>
   <head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

   </head>
<style type="text/css">
   #circle:hover {fill: red!important}
   circle,text {cursor: pointer;}
</style>
   <body>
    <div class="svg-container"></div>
<script>
         var data = [];
         axios.get('http://keetool3.xyz/manageapi/v3/v2/room/17/seats?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjIsImlzcyI6Imh0dHA6Ly9tYW5hZ2Uua2VldG9vbDMueHl6L2xvZ2luIiwiaWF0IjoxNTI2MjgyNTk1LCJleHAiOjE1MjY4ODczOTUsIm5iZiI6MTUyNjI4MjU5NSwianRpIjoiY0ZjcXpQTWRQb21MRmw2SiJ9.glIAKINeZZ-nImFg3HqTwSaBfVAecu50Y32RABK0WH0')
  .then(function (response) {
    data = response.data.data.seats;
    width = response.data.data.width;
    height = response.data.data.height;
   var svg = d3
            .select(".svg-container")
            .append("svg")
            .attr("viewBox","0 0 "+width+" "+height)        
    var g = svg.selectAll("g")
            .data(data)
            .enter()
            .append("g") 
            .attr('transform', function (d) { return 'translate(' + d.x + ',' + d.y + ')'; });
    g.append("circle").attr('r',function (d) {return 10*d.r} )   
    g.append("text").attr('fill', 'white').attr('text-anchor','middle' ).attr('alignment-baseline','central' )
         .attr("font-size", "20px")
         .attr("font-family", "sans-serif").text(function(d){return d.name });
    function render(dataset) { 
         d3.select('svg').selectAll('g').data(dataset).on('click',function(d){if(d.archived === 1){d.archived =0; render(data)} else {d.archived=1; render(data)}}).select("circle").style('fill', function (d){return d.archived == 0 ? d.color : "gray" })
      } ;
      render(data); 

  })
 
</script>

   </body>
</html>